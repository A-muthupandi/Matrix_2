<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #container{
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        div span{
            text-align: center;
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <div id="container"></div>
</body>
<script>
    let set = 0;
    let matrix;
    let span;
    let div;
    let array;
    let sub;
    let bomb;
    let random;
    let r;
    start();
    function start() {
    if(set > 0) {
        matrix = '0';
    }
    matrix =  Number(prompt("Enter a matrix"));
    bomb =  Number(prompt("Enter a number of bombs"));
    let container = document.getElementById('container');
    if(!matrix || matrix <= 0 || !bomb || bomb <= 0) {
        alert("Enter a valid number");
        set++;
        start();
    }
    else{
        div = document.createElement('div');
        div.style.height = 'auto';
        div.style.width = 'auto';
        div.style.display = 'grid';
        div.style.background = 'red';
        div.style.gridTemplateColumns = `repeat(${matrix},1fr)`;
        div.style.gap = '4px';
        let arr = findMatrix();

        for(i = 0;i < matrix * matrix;i++) {
        span = document.createElement('span');
        span.style.padding = '20px';
        span.style.height = '20px';
        span.style.width = '20px';
        span.style.background = 'violet';
        if(array[0][i][1].includes(i)) {
            span.textContent = '*';
        }
        else {
        span.textContent = '0';
        }
        span.style.color = 'violet';
        console.log(arr[0][i]);
        
        div.appendChild(span);
        span.classList.add('boxes');
        }
    container.appendChild(div);
    let spans = [...document.querySelectorAll('.boxes')];
    spans.forEach((span,index) => {
        span.addEventListener('click',function() {
            let ch = index;
            if(array[0][ch][1].includes(index)) {
                alert("Bomb is clicked");
                Over();
            }
        })
    })
}
}
function Over() {
    span.style.color = 'black';
}
function findMatrix() {
    let matrix2 = matrix * matrix;
    array = [];
    sub = [];
    let count = 0;
    for(i = 0; i < matrix2; i++) {
        r = Array(2);
        r[0] = i;
        r[1] = [];
        sub.push(r);
    }
    array.push(sub);
    for(j = 0;j < bomb;j++) {
     random = Math.floor(Math.random() * matrix2);
     if(!array[0][random][1].includes(random)) {
        array[0][random][1].push(random);
        count++;
     }
     if(count === bomb || count >= bomb) {
        break;
     }
     else{
        j--;
     }
    }
    
    return array;
}
</script>
</html>
